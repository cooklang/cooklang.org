<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Generating a recipe graph with ChatGPT - Cooklang: recipe markup language</title>
<meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/favicon.png><link rel=stylesheet href=/css/style.min.4b5e25415dcbd7f7323a57a23e799feb1198955710c290a986c534338f44ab7b.css></head><body class='page page-default-single'><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class=menu-item-docs><a href=/docs/><span>Docs</span></a></li><li class=menu-item-cli><a href=/cli/><span>CLI</span></a></li><li class="menu-item-mobile app"><a href=/app/><span>Mobile App</span></a></li><li class=menu-item-blog><a href=/blog/><span>Blog</span></a></li></ul></div><div class=wrapper><div class=header><div class=container><div class=logo><a href=/><img alt=Logo src=/images/logo.svg></a></div><div class=logo-mobile><a href=/><img alt=Logo src=/images/logo.svg></a></div><div id=main-menu class=main-menu><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class=menu-item-docs><a href=/docs/><span>Docs</span></a></li><li class=menu-item-cli><a href=/cli/><span>CLI</span></a></li><li class="menu-item-mobile app"><a href=/app/><span>Mobile App</span></a></li><li class="menu-item-blog active"><a href=/blog/><span>Blog</span></a></li><li><a href=https://www.buymeacoffee.com/dubadub target=_blank><img src=https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png alt="Buy Me A Coffee" style=height:40px!important;width:145px!important></a></li></ul></div><button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button>
<span class=hamburger-box><span class=hamburger-inner></span></span></button></div></div><div class="container pt-2 pt-md-6 pb-3 pb-md-6"><div class=row><div class="col-12 col-md-3 mb-3"><div class=sidebar><div class=docs-menu><h4>Blog</h4><ul><li><a href=/blog/08-david-a-mundie-interview/>David A. Mundie on Cooking and Technology</a></li><li><a href=/blog/07-nutrients-during-cooking/>How Nutrients Change During Cooking</a></li><li><a href=/blog/06-developing-file-sync-library/>Developing file sync library</a></li><li><a href=/blog/05-recipes-as-stack-machines/>Understanding Recipes as Stack Machines</a></li><li><a href=/blog/04-why-recipe-standard/>Why Recipe Standard is Important</a></li><li class=active><a href=/blog/03-ai-and-the-evolution-of-recipe-formats/>Generating a recipe graph with ChatGPT</a></li><li><a href=/blog/02-practical-savings-on-groceries-with-cooklang/>Practical savings on groceries with Cooklang and tools</a></li><li><a href=/blog/01-my-approach-to-automating-grocery-shopping/>My approach to automating grocery shopping</a></li></ul></div></div></div><div class="col-12 col-md-9"><h1 class=title>Generating a recipe graph with ChatGPT</h1><div class=content><p><img src=/blog/part-recipe-graph.png alt></p><p>Recipes have been structured in a similar format for a long time; a list of ingredients followed by the steps necessary to create a dish. While this works for human readers, it&rsquo;s less convenient for computers. They struggle to understand when each ingredient is used and what happens in each step. This makes it challenging to design applications that provide step-by-step recipe instructions, let alone enhance the overall cooking process.</p><p>To combat this, a new format, Cooklang, was created, in which the text is organized in a straightforward structure and users could tag ingredients and tools as they were mentioned. This allowed the development of applications that could present recipes step by step, create shopping lists, and offer more benefits.</p><p>We attempted to create a <a href=https://github.com/cooklang/cook-import>universal tool</a> that could import any recipe from the web and reformat it into this user-friendly layout. However, it was a difficult task due to the variety of ways people write recipes. For instance, a recipe might introduce a bunch of spices early on and later merely refer to them as &ldquo;spices&rdquo;, complicating the process of tracking individual ingredients.</p><p>Consequently, we opted for a different approach. We proposed utilizing AI/ML assistance to trace the use of ingredients from start to finish. This could provide a clear understanding of when and how each component is used, ultimately leading to the construction of a recipe graph. This graph begins with the ingredients and cookware, following their interactions through the recipe, visualizing the process as it evolves.</p><p>Not long ago, people approached me to present their recipes in a more structured format and engage in <a href=https://github.com/cooklang/spec/discussions/62>discussions</a> about them. The graph format is particularly useful for computers. Check out this informative Twitter thread about different recipe representations:</p><blockquote class=twitter-tweet><p lang=en dir=ltr>ðŸ§µI spent the past hour searching for a memory of a way to visualize recipe dependencies (both steps and ingredients). It started when <a href="https://twitter.com/dendronhq?ref_src=twsrc%5Etfw">@dendronhq</a>'s changelog introduced me to <a href="https://twitter.com/cooklangorg?ref_src=twsrc%5Etfw">@cooklangorg</a>, a way to store human-readable yet parseable recipes. This led me to <a href="https://twitter.com/adamspiers?ref_src=twsrc%5Etfw">@adamspiers</a> 's sketch: <a href=https://t.co/uEJK359as8>https://t.co/uEJK359as8</a></p>&mdash; Cameron Yick (@hydrosquall) <a href="https://twitter.com/hydrosquall/status/1486157532968148996?ref_src=twsrc%5Etfw">January 26, 2022</a></blockquote><script async src=https://platform.twitter.com/widgets.js></script><p>Thus, I wanted to explore the possibility of using GPT-4 to create this graph.</p><p>GPT-4 works by responding to user prompts. For instance, you provide an example of the desired output, and it generates similar results. We decided to use this model for entity recognition and to identify relationships between ingredients and cookware.</p><p>We examined other projects for inspiration, like <a href=https://graphgpt.vercel.app>GraphGPT</a>, which utilizes direct instructions to prompt the model. Adapting this approach, we had our initial attempt at creating a graph. However, it was less successful in recognizing relationships.</p><p>After a few tweaks, we managed to achieve better results. Here&rsquo;s our improved attempt:</p><script src=https://gist.github.com/dubadub/244d3ea113565cae3817d89ebe9101ec.js></script><p>Further fine-tuning allowed us to generate Ruby-compatible syntax for creating a graph image. Here&rsquo;s the result: <script src=https://gist.github.com/dubadub/9da2fbe493a72e3090fefd9e5123dc45.js></script></p><p>Notice how the AI smartly creates names for intermediate ingredients.</p><p><img src=/blog/part-recipe-graph.png alt></p><p><a href=/blog/full-recipe-graph.png>Open full graph</a></p><p>What&rsquo;s next? If this system works effectively, it could revolutionize the way we approach recipe management. It isn&rsquo;t about creating a new language syntax, but rather focusing on improving tools and user experiences. This graph-based approach could easily be integrated into our CLI and mobile applications. This means users won&rsquo;t need to learn any syntax. They can continue writing recipes as they always have, and the computer will extract what it needs, making everyone&rsquo;s lives easier.</p><p>-Alexey</p></div></div></div></div></div></div><div class=sub-footer><div class=container><div class=footer-sections><div class=footer-section><h4>Mobile Apps</h4><div class=app-badges><a href="https://play.google.com/store/apps/details?id=md.cook.android"><img src=/google-play-badge.png alt="Download on Google Play" style=width:100px></a>
<a href="https://apps.apple.com/us/app/cooklangapp/id1598799259#?platform=iphone"><img src=/app-store-badge.png alt="Download on App Store" style=width:100px></a></div></div><div class=footer-section><h4>Follow us</h4><div class=social-links><a href=https://github.com/cooklang>GitHub</a>
<a href=https://discord.gg/fUVVvUzEEK>Discord</a>
<a href=https://www.reddit.com/r/cooklang/>Reddit</a>
<a href=https://bsky.app/profile/cooklang.bsky.social>BlueSky</a>
<a href=https://mas.to/@cooklang>Mastodon</a>
<a href=https://x.com/cooklangorg>X (Twitter)</a>
<a href=/blog/index.xml>RSS Feed</a></div></div></div></div></div><script type=text/javascript src=/js/scripts.min.ec19db7e4836c12e2c5e3697d926bc3e4c22005167d9826aab54feca08f0c093.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-5XEMVMR4NG"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5XEMVMR4NG")</script><link rel=stylesheet href=/scss/prism.min.b4b2409283318b7f028d286bf451e940afc66b1fb85043dd0bbf27fc271c0822.css><script>(function(){function n(){return new Promise((e,t)=>{const n=document.createElement("script");n.src="/js/prism.min.af85882ed81501083e123f60e917984b380bc16ac22a486c579c2ca6e02389f8.js",n.onload=e,n.onerror=t,document.head.appendChild(n)})}function s(e,t){return t&&t!=="fallback"?t:e.includes("@")||e.includes("#")||e.includes("~")?"cooklang":e.startsWith("#!/bin/")||e.includes("$(")||e.includes("`")?"sh":e.includes(": ")&&!e.includes("{")?"yaml":e.includes("=")&&e.includes("[")?"toml":"fallback"}function e(){const e=document.querySelectorAll('pre code[class*="language-"]');if(!e.length)return;e.forEach(e=>{const t=e.className.match(/language-(\w+)/)?.[1]||"fallback",o=s(e.textContent,t);o!==t&&(e.classList.remove(`language-${t}`),e.classList.add(`language-${o}`));const n=e.parentElement;n&&!n.classList.contains("line-numbers")&&n.classList.add("line-numbers")}),typeof Prism!="undefined"&&Prism.highlightAll()}async function t(){try{await n(),e()}catch(e){console.error("Failed to initialize Prism.js:",e)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t(),document.addEventListener("hugo:refresh",e)})()</script></body></html>