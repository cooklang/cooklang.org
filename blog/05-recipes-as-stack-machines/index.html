<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Understanding Recipes as Stack Machines - Cooklang: recipe markup language</title>
<meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/favicon.png><link rel=stylesheet href=/css/style.min.4b5e25415dcbd7f7323a57a23e799feb1198955710c290a986c534338f44ab7b.css></head><body class='page page-default-single'><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class=menu-item-docs><a href=/docs/><span>Docs</span></a></li><li class=menu-item-cli><a href=/cli/><span>CLI</span></a></li><li class="menu-item-mobile app"><a href=/app/><span>Mobile App</span></a></li><li class=menu-item-blog><a href=/blog/><span>Blog</span></a></li></ul></div><div class=wrapper><div class=header><div class=container><div class=logo><a href=/><img alt=Logo src=/images/logo.svg></a></div><div class=logo-mobile><a href=/><img alt=Logo src=/images/logo.svg></a></div><div id=main-menu class=main-menu><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class=menu-item-docs><a href=/docs/><span>Docs</span></a></li><li class=menu-item-cli><a href=/cli/><span>CLI</span></a></li><li class="menu-item-mobile app"><a href=/app/><span>Mobile App</span></a></li><li class="menu-item-blog active"><a href=/blog/><span>Blog</span></a></li><li><a href=https://www.buymeacoffee.com/dubadub target=_blank><img src=https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png alt="Buy Me A Coffee" style=height:40px!important;width:145px!important></a></li></ul></div><button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button>
<span class=hamburger-box><span class=hamburger-inner></span></span></button></div></div><div class="container pt-2 pt-md-6 pb-3 pb-md-6"><div class=row><div class="col-12 col-md-3 mb-3"><div class=sidebar><div class=docs-menu><h4>Blog</h4><ul><li><a href=/blog/08-david-a-mundie-interview/>David A. Mundie on Cooking and Technology</a></li><li><a href=/blog/07-nutrients-during-cooking/>How Nutrients Change During Cooking</a></li><li><a href=/blog/06-developing-file-sync-library/>Developing file sync library</a></li><li class=active><a href=/blog/05-recipes-as-stack-machines/>Understanding Recipes as Stack Machines</a></li><li><a href=/blog/04-why-recipe-standard/>Why Recipe Standard is Important</a></li><li><a href=/blog/03-ai-and-the-evolution-of-recipe-formats/>Generating a recipe graph with ChatGPT</a></li><li><a href=/blog/02-practical-savings-on-groceries-with-cooklang/>Practical savings on groceries with Cooklang and tools</a></li><li><a href=/blog/01-my-approach-to-automating-grocery-shopping/>My approach to automating grocery shopping</a></li></ul></div></div></div><div class="col-12 col-md-9"><h1 class=title>Understanding Recipes as Stack Machines</h1><div class=content><p>Programming and cooking share more in common than we often acknowledge. Recipes, at their core, are algorithms—sets of instructions executed in sequence to transform ingredients into a finished dish. But what if we thought about recipes as something more abstract? Let’s take a detour into the world of stack machines to explore a new perspective on understanding, validating, and even optimizing recipes.</p><h3 id=what-is-a-stack-machine>What Is a Stack Machine?</h3><p>A stack machine is a type of computational model where instructions operate on a last-in, first-out (LIFO) stack. You push data onto the stack and execute operations that consume and produce new stack values. This simple model underlies many programming paradigms and languages, from Forth and PostScript to the internals of Java&rsquo;s bytecode.</p><p>Interestingly, the stack machine model maps well onto processes that involve sequential transformations—like following a recipe. In cooking, you’re constantly manipulating a “stack” of ingredients, tools, and intermediate results. When you peel a carrot, for example, you “push” the peeled carrot onto the stack, ready to be sliced in the next step.</p><h3 id=recipes-as-stack-machines>Recipes as Stack Machines</h3><p>Let’s break down the recipe for, say, a basic vinaigrette:</p><ol><li>Add 1 tbsp vinegar to a bowl.</li><li>Add 3 tbsp olive oil.</li><li>Whisk until emulsified.</li></ol><p>In the stack machine model, this can be visualized as:</p><ul><li>Step 1: Push vinegar onto the stack.</li><li>Step 2: Push olive oil onto the stack.</li><li>Step 3: Apply the <code>whisk</code> operation, which consumes the top two elements and pushes the emulsified result back onto the stack.</li></ul><p>The recipe is validated if, at the end of the process, the stack contains exactly what you expect: an emulsified vinaigrette. Errors, like forgetting to whisk or adding an extra ingredient, can be detected as deviations from the expected stack state.</p><h3 id=validating-recipes-using-stack-machines>Validating Recipes Using Stack Machines</h3><p>One intriguing application of this perspective is validation. In cooking, a poorly written recipe is the equivalent of a buggy program. Missteps lead to broken sauces, burnt dishes, or wasted ingredients. By formalizing recipes as stack operations, we could develop tools to validate them, ensuring:</p><ol><li><p>Balanced Operations: Every “push” (add ingredient) has a corresponding operation to transform or use it. For example, a stack machine could flag an unused “egg” in a recipe if there’s no “whisk” or “bake” step that consumes it.</p></li><li><p>Type Safety: Stack machines can enforce “types.” Ingredients can be tagged (e.g., liquid, solid, emulsifiable), and operations can validate compatibility. A <code>whisk</code> operation that tries to emulsify water and flour could trigger an error.</p></li><li><p>Dependency Resolution: Stack operations lend themselves naturally to dependency graphs. You can represent each operation as a node and each stack state as an edge. This graph structure ensures all prerequisites are met before advancing to the next step.</p></li></ol><h3 id=recipes-as-graphs-in-stack-oriented-systems>Recipes as Graphs in Stack-Oriented Systems</h3><p>Stack machines are powerful not only for linear processes but also for branching workflows. Recipes often include conditional logic (“if the sauce is too thick, add water”) or loops (“knead until the dough is smooth”). These can be represented using stack-machine-inspired graphs:</p><ul><li>Nodes represent stack states after each operation.</li><li>Edges represent transitions between states.</li><li>Validation ensures every node has clear inputs and outputs.</li></ul><p>This representation could power a new generation of recipe apps. Imagine a system that dynamically adjusts the instructions based on the current state of the stack. If the stack includes “dry dough,” the app suggests adding more water and recalculates subsequent steps.</p><h3 id=stack-oriented-programming-in-recipes>Stack-Oriented Programming in Recipes</h3><p>Stack-oriented programming languages, such as Forth, offer another fascinating parallel. These languages are simple but expressive, with an economy of syntax that mirrors the clarity we expect in recipes. Here’s a playful thought experiment: What if we wrote recipes as stack-oriented programs?</p><p>For example, the vinaigrette could look like this in Forth:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-forth data-lang=forth><span class=line><span class=cl><span class=mi>1</span> <span class=nf>tbsp</span> <span class=nf>vinegar</span> <span class=nf>push</span>
</span></span><span class=line><span class=cl><span class=mi>3</span> <span class=nf>tbsp</span> <span class=nf>oil</span> <span class=nf>push</span>
</span></span><span class=line><span class=cl><span class=nf>whisk</span>
</span></span></code></pre></div><p>This concise representation makes dependencies and transformations explicit. As with programming, these systems could allow extensions—imagine a user-defined “fold” operator to handle egg whites.</p><h3 id=beyond-cooking-the-power-of-abstraction>Beyond Cooking: The Power of Abstraction</h3><p>Thinking of recipes as stack machines isn’t just an intellectual exercise. It’s a way of abstracting the cooking process to unlock new capabilities:</p><ul><li>By logging stack states at each step, you could identify precisely where things went wrong.</li><li>Stack-based abstractions could help train models to parse unstructured text recipes into structured formats, enabling better cooking assistants.</li><li>Robots in kitchens could execute stack-based recipes with deterministic precision, avoiding common pitfalls like missing steps.</li></ul><h3 id=conclusion>Conclusion</h3><p>Recipes, like programs, are instructions meant to produce consistent results. Thinking of recipes as stack machines is a mental shift that clarifies their structure, highlights opportunities for validation, and opens up new avenues for innovation. Whether you’re a programmer or a chef—or both—it’s a useful framework for understanding how seemingly simple processes can yield extraordinary results.</p><p>After all, the best recipes, like the best code, are both elegant and robust.</p><hr><p>What do you think? Could stack machines become the basis for your next cookbook—or your next app?</p></div></div></div></div></div></div><div class=sub-footer><div class=container><div class=footer-sections><div class=footer-section><h4>Mobile Apps</h4><div class=app-badges><a href="https://play.google.com/store/apps/details?id=md.cook.android"><img src=/google-play-badge.png alt="Download on Google Play" style=width:100px></a>
<a href="https://apps.apple.com/us/app/cooklangapp/id1598799259#?platform=iphone"><img src=/app-store-badge.png alt="Download on App Store" style=width:100px></a></div></div><div class=footer-section><h4>Follow us</h4><div class=social-links><a href=https://github.com/cooklang>GitHub</a>
<a href=https://discord.gg/fUVVvUzEEK>Discord</a>
<a href=https://www.reddit.com/r/cooklang/>Reddit</a>
<a href=https://bsky.app/profile/cooklang.bsky.social>BlueSky</a>
<a href=https://mas.to/@cooklang>Mastodon</a>
<a href=https://x.com/cooklangorg>X (Twitter)</a>
<a href=/blog/index.xml>RSS Feed</a></div></div></div></div></div><script type=text/javascript src=/js/scripts.min.ec19db7e4836c12e2c5e3697d926bc3e4c22005167d9826aab54feca08f0c093.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-5XEMVMR4NG"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5XEMVMR4NG")</script><link rel=stylesheet href=/scss/prism.min.b4b2409283318b7f028d286bf451e940afc66b1fb85043dd0bbf27fc271c0822.css><script>(function(){function n(){return new Promise((e,t)=>{const n=document.createElement("script");n.src="/js/prism.min.af85882ed81501083e123f60e917984b380bc16ac22a486c579c2ca6e02389f8.js",n.onload=e,n.onerror=t,document.head.appendChild(n)})}function s(e,t){return t&&t!=="fallback"?t:e.includes("@")||e.includes("#")||e.includes("~")?"cooklang":e.startsWith("#!/bin/")||e.includes("$(")||e.includes("`")?"sh":e.includes(": ")&&!e.includes("{")?"yaml":e.includes("=")&&e.includes("[")?"toml":"fallback"}function e(){const e=document.querySelectorAll('pre code[class*="language-"]');if(!e.length)return;e.forEach(e=>{const t=e.className.match(/language-(\w+)/)?.[1]||"fallback",o=s(e.textContent,t);o!==t&&(e.classList.remove(`language-${t}`),e.classList.add(`language-${o}`));const n=e.parentElement;n&&!n.classList.contains("line-numbers")&&n.classList.add("line-numbers")}),typeof Prism!="undefined"&&Prism.highlightAll()}async function t(){try{await n(),e()}catch(e){console.error("Failed to initialize Prism.js:",e)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t(),document.addEventListener("hugo:refresh",e)})()</script></body></html>