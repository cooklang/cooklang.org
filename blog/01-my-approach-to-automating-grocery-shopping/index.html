<!doctype html><html lang=en-ie dir=ltr class="scroll-smooth bg-gray-50"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>My approach to automating grocery shopping | Cooklang: recipe markup language</title>
<link rel=canonical href=https://cooklang.org/blog/01-my-approach-to-automating-grocery-shopping/><link rel=icon type=image/png href=/favicon.png><link rel="shortcut icon" type=image/png href=/favicon.png><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/prism.min.5e28d0b350553e3561e5f801556f07d1046d05bbab0b9c05eacc2b4e55ca6a74.css integrity="sha256-XijQs1BVPjVh5fgBVW8H0QRtBburC5wF6swrTlXKanQ=" crossorigin=anonymous><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Lora:ital,wght@0,400;0,500;1,400&family=JetBrains+Mono:wght@400;500&display=swap" rel=stylesheet><script src=/js/main.9f322db4d8f2e67fb7c90a1215bc4d6cf7b9fc25ef746d30dc317d9fc812c4dc.js integrity="sha256-nzIttNjy5n+3yQoSFbxNbPe5/CXvdG0w3DF9n8gSxNw=" crossorigin=anonymous></script><script src=/js/prism.min.af85882ed81501083e123f60e917984b380bc16ac22a486c579c2ca6e02389f8.js integrity="sha256-r4WILtgVAQg+Ej9g6ReYSzgLwWrCKkhsV5wspuAjifg=" crossorigin=anonymous></script><script src=/js/prism-cooklang.min.02a17849822faf1e497db9a61501860bd531cbe777da855206f6b548896a1066.js integrity="sha256-AqF4SYIvrx5JfbmmFQGGC9Uxy+d32oVSBva1SIlqEGY=" crossorigin=anonymous></script><script defer data-domain=cooklang.org src=https://plausible.io/js/script.outbound-links.tagged-events.js></script><script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body class="min-h-screen bg-gray-50 text-cooklang-gray-800 antialiased flex flex-col"><header class="bg-white border-b border-cooklang-gray-200 sticky top-0 z-50"><div class="container mx-auto px-4"><nav class="flex items-center justify-between py-4"><div class="flex items-center"><a href=https://cooklang.org/ class="flex items-center space-x-2 hover:opacity-80 transition-opacity"><img alt="Cooklang: recipe markup language" src=/logo.svg class="h-10 w-auto">
<span class="text-2xl font-bold text-cooklang-gray-900">Cooklang</span></a></div><div class="hidden md:flex items-center gap-8"><nav class="flex items-center gap-6"><a href=/ class="text-base font-medium transition-colors duration-150 whitespace-nowrap
text-cooklang-gray-700 hover:text-cooklang-orange">Home
</a><a href=/docs/ class="text-base font-medium transition-colors duration-150 whitespace-nowrap
text-cooklang-gray-700 hover:text-cooklang-orange">Docs
</a><a href=/cli/ class="text-base font-medium transition-colors duration-150 whitespace-nowrap
text-cooklang-gray-700 hover:text-cooklang-orange">CLI
</a><a href=/app/ class="text-base font-medium transition-colors duration-150 whitespace-nowrap
text-cooklang-gray-700 hover:text-cooklang-orange">Mobile App
</a><a href=/blog/ class="text-base font-medium transition-colors duration-150 whitespace-nowrap
text-cooklang-orange">Blog
</a><a href=/about/ class="text-base font-medium transition-colors duration-150 whitespace-nowrap
text-cooklang-gray-700 hover:text-cooklang-orange">About</a></nav><a href=https://www.buymeacoffee.com/dubadub target=_blank rel="noopener noreferrer" class="inline-flex items-center gap-2 px-4 py-2 bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-medium text-sm rounded-lg transition-colors duration-150 whitespace-nowrap"><span>‚òï</span>
<span>Buy me a coffee</span></a></div><button class="md:hidden p-2 hover:bg-gray-100 rounded-md transition-colors" id=mobile-menu-button aria-label="Toggle mobile menu"><svg class="w-6 h-6" fill="none" stroke="currentcolor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button></nav></div><div id=mobile-menu class="hidden md:hidden bg-white border-t border-gray-200"><nav class="container mx-auto px-4 py-4 space-y-2"><a href=/ class="block px-4 py-2 text-base font-medium rounded-md transition-colors duration-150
text-cooklang-gray-700 hover:bg-cooklang-gray-100">Home
</a><a href=/docs/ class="block px-4 py-2 text-base font-medium rounded-md transition-colors duration-150
text-cooklang-gray-700 hover:bg-cooklang-gray-100">Docs
</a><a href=/cli/ class="block px-4 py-2 text-base font-medium rounded-md transition-colors duration-150
text-cooklang-gray-700 hover:bg-cooklang-gray-100">CLI
</a><a href=/app/ class="block px-4 py-2 text-base font-medium rounded-md transition-colors duration-150
text-cooklang-gray-700 hover:bg-cooklang-gray-100">Mobile App
</a><a href=/blog/ class="block px-4 py-2 text-base font-medium rounded-md transition-colors duration-150
text-cooklang-gray-700 hover:bg-cooklang-gray-100">Blog
</a><a href=/about/ class="block px-4 py-2 text-base font-medium rounded-md transition-colors duration-150
text-cooklang-gray-700 hover:bg-cooklang-gray-100">About
</a><a href=https://www.buymeacoffee.com/dubadub target=_blank rel="noopener noreferrer" class="block px-4 py-2 bg-yellow-400 text-gray-900 font-medium text-sm rounded-md">‚òï Buy me a coffee</a></nav></div></header><main class=flex-1><article class=bg-white><div class="container mx-auto px-4 py-8 overflow-x-auto"><header class=mb-8><h1 class="text-4xl font-bold text-cooklang-gray-900 mb-4">My approach to automating grocery shopping</h1><div class=text-cooklang-gray-600><time datetime=2021-05-20T19:27:37+10:00>May 20, 2021</time></div></header><div class="prose prose-lg max-w-none text-cooklang-gray-700 overflow-x-auto"><p>The pandemic has presented everyone with unique challenges. For me, it became particularly hard to switch to online grocery shopping.</p><p>When I do my shopping offline, I usually don‚Äôt have to plan much, moving through the isles and picking up stuff as I go. It‚Äôs rare that I forget something, but more often I buy things I don‚Äôt actually need, but isn‚Äôt that part of how supermarkets work? In my typical order, I'd buy groceries for seven to ten days at a time and it would contain sixty to eighty items in my cart.</p><p>Shopping online is a different story. I can't reproduce the same behaviour and go down every isle. So, I realized I needed to plan my meals. I started writing down ingredients for meals I wanted to make on sticky notes and combining them to make an order.</p><p>This was really tedious. After a few orders, I noticed that it was kind of repetitive. Although my wife will tell you that I just was lazy and didn't want to do boring stuff, the developer in me said, ‚ÄùIt's time to automate this and never solve the same problem again.‚Äù</p><p>That's how <a href=https://cooklang.org/>Cooklang</a> was born.</p><h1 id=about-cooklang>About Cooklang</h1><p>I thought, <em>what if I store my recipes in Markdown-like text files and tag ingredients with @ symbol?</em> Like this:</p><div class=code-toolbar><pre class=language- data-language><code class=language->    Then add @salt and @ground black pepper{} to taste.
    Poke holes in @potato{2}.
    Place @bacon strips{1%kg} on a baking sheet and glaze with @syrup{1/2%tbsp}.</code></pre></div><p>That will make recipe files human and machine readable.</p><p>Given these recipe files, computers can create a shopping list and much more: calculate nutrition values, costs or whatever else you could need, given that information for ingredients provided.</p><p>And the recipe is still human readable, so I can be agile and store my recipes in git and perfect them over time (like code refactoring).</p><p>Also, because it's just a simple text format I avoid "vendor lock-in" problems and can use my recipes the same way when I retire. My recipes are mine, forever.</p><h1 id=about-tools>About tools</h1><p>Having only a language specification isn't really helpful. Yes, I can store my recipes on GitHub and own them, but that's it.</p><p>I imagined it would be nice to have many small applications which can understand the language and do their own thing very well: calculate calories, shopping, costs, smart meal planning, etc. I was really excited.</p><p>I read a wonderful book, <a href=http://craftinginterpreters.com/>Crafting Interpreters</a> by Robert Nystrom, and did a few experiments. I created a simple <a href=https://github.com/cooklang/CookInSwift>parser</a> and <a href=https://github.com/cooklang/CookCLI>CLI app</a>. In this post, I wanted to focus on how I automated shopping. I might write another post about the parser and CLI, if anyone interested, so I will skip all the details about those for now.</p><p>So CLI can understand Cooklang files, extract ingredients, and group them:</p><div class=code-toolbar><pre class=language- data-language><code class=language->    $ cook shopping-list \
    &amp;gt; Neapolitan\ Pizza.cook \
    &amp;gt; Root\ Vegetable\ Tray\ Bake.cook
    BREADS AND BAKED GOODS
        breadcrumbs                   150 g

    DRIED HERBS AND SPICES
        dried oregano                 3 tbsp
        dried sage                    1 tsp
        pepper                        1 pinch
        salt                          25 g, 2 pinches

    FRUIT AND VEG
        beetroots                     300 g
        carrots                       300 g
        celeriac                      300 g
        fresh basil                   18 leaves
        garlic                        3 gloves
        lemon                         1 item
        onion                         1 large
        red onion                     2 items
        thyme                         2 springs

    MEAT AND SEAFOOD
        parma ham                     3 packs

    MILK AND DAIRY
        butter                        15 g
        egg                           1 item
        mozzarella                    3 packs

    OILS AND DRESSINGS
        Dijon mustard                 1 tsp
        Marmite                       1 tsp
        cider                         150 ml
        olive oil                     3 tbsp

    OTHER (add new items into aisle.conf)
        tipo zero flour               820 g

    PACKAGED GOODS, PASTA AND SAUCES
        vegetable stock               150 ml
        water                         530 ml

    TINNED GOODS AND BAKING
        cannellini beans              400 g
        chopped tomato                3 cans
        fresh yeast                   1.6 g
        redcurrant jelly              1 tsp</code></pre></div><p>I can set output format to json or yaml and feed this into other programs, or just use good old plain text output manipulation. CLI has a few more features like a web-server to explore the recipes with cooking mode and make shopping list in the browser.</p><p>I migrated a bunch of recipes from scattered sources into Cooklang format and stored them on GitHub repository <a href=https://github.com/dubadub/cookbook>https://github.com/dubadub/cookbook</a>.</p><h1 id=my-grocery-shopping-approach>My grocery shopping approach</h1><p>Unfortunately, I haven't fully automated my grocery shopping yet. I still need to do some manual steps, because my shop doesn't provide any API access (surprise!).</p><p>That's how my process looks now:</p><p>1/ I generate a list of all ingredients. I added directories with symlinks to recipes, which represent a meal plan. So it's easy to generate a list of ingredients for the whole directory like that:</p><div class=code-toolbar><pre class=language- data-language><code class=language->    $ cook shopping-list --only-ingredients ./Plan\ I</code></pre></div><p>2/ I remove anything I already have at home from the list.</p><p>3/ I paste all the ingredients to a multi search input on the shop's web-site.</p><p>4/ I manually go through each item and add it to my cart üòì.</p><p>5/ Done!</p><p>It has a manual step, but:</p><ul><li>it‚Äôs much faster than before.</li><li>it‚Äôs less for me to think about;</li><li>it makes the entire process more precise.</li></ul><p>I'm really happy with this precision part. I noticed that I now cover all my needs but no longer over consume. I see this as a form of eco-sufficiency in some ways.</p><h1 id=whats-next>What's next</h1><p>I have only solved 80% of my problem, and I want to do more. I'm thinking about creating a mapping between ingredients from my recipes and links to them at my shop's website. That will allow me to use curl or Selenium to complete my solution.</p><p>-Alexey</p><p>Note, originally posted on <a href=https://www.daniweb.com/programming/software-development/threads/537481/my-approach-to-automating-grocery-shopping>Daniweb</a>.</p></div></div></article></main><footer class="bg-cooklang-gray-900 text-white mt-auto"><div class="container mx-auto px-4 py-8"><div class="grid grid-cols-1 md:grid-cols-4 gap-8"><div><h4 class="font-semibold mb-4">Mobile Apps</h4><div class=space-y-2><a href="https://play.google.com/store/apps/details?id=md.cook.android" class=block><img src=/google-play-badge.png alt="Download on Google Play" class=h-10>
</a><a href="https://apps.apple.com/us/app/cooklangapp/id1598799259#?platform=iphone" class=block><img src=/app-store-badge.png alt="Download on App Store" class=h-10></a></div></div><div><h4 class="font-semibold mb-4">Resources</h4><ul class=space-y-2><li><a href=/docs/ class="text-cooklang-gray-300 hover:text-white transition-colors">Documentation</a></li><li><a href=/cli/ class="text-cooklang-gray-300 hover:text-white transition-colors">CLI Tool</a></li><li><a href=/app/ class="text-cooklang-gray-300 hover:text-white transition-colors">Mobile App</a></li><li><a href=https://cooklang.github.io/cooklang-rs/ class="text-cooklang-gray-300 hover:text-white transition-colors">Playground</a></li><li><a href=https://github.com/cooklang/spec/discussions class="text-cooklang-gray-300 hover:text-white transition-colors">Spec Discussions</a></li><li><a href=https://github.com/cooklang class="text-cooklang-gray-300 hover:text-white transition-colors">GitHub</a></li></ul></div><div><h4 class="font-semibold mb-4">Community</h4><ul class=space-y-2><li><a href=https://reddit.com/r/cooklang class="text-cooklang-gray-300 hover:text-white transition-colors">Reddit</a></li><li><a href=https://discord.gg/fUVVvUzEEK class="text-cooklang-gray-300 hover:text-white transition-colors">Discord</a></li><li><a href=https://x.com/cooklangorg class="text-cooklang-gray-300 hover:text-white transition-colors">X (Twitter)</a></li><li><a href=https://bsky.app/profile/cooklang.bsky.social class="text-cooklang-gray-300 hover:text-white transition-colors">Bluesky</a></li><li><a href=https://mas.to/@cooklang class="text-cooklang-gray-300 hover:text-white transition-colors">Mastodon</a></li><li><a href=https://www.youtube.com/channel/UCOZg3EJ1QsE_DqO-ZcMWblw class="text-cooklang-gray-300 hover:text-white transition-colors">YouTube</a></li><li><a href=/blog/index.xml class="text-cooklang-gray-300 hover:text-white transition-colors">RSS Feed</a></li></ul></div><div><h4 class="font-semibold mb-4">About</h4><p class="text-cooklang-gray-300 text-sm">Cooklang is a markup language for recipes that makes it easy to manage your personal recipe collection.</p></div></div><div class="mt-8 pt-8 border-t border-cooklang-gray-700 text-center text-cooklang-gray-400"><p>Copyright ¬© 2021-2025 Cooklang. All rights reserved.</p></div></div></footer><script>document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("pre code, code").forEach(function(e){var t=e.textContent||e.innerText||"",t=t.replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");e.textContent=t}),typeof Prism!="undefined"&&Prism.highlightAll()})</script></body></html>